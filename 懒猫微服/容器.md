> ä¸€ç›´æƒ³å†™ä¸€æœ¬å®¹å™¨å°ä¹¦ï¼ŒçœŸå¥½æ‡’çŒ«åŸºæœ¬éƒ½åšäº†å®¹å™¨åŒ–ï¼Œæ‰€ä»¥æŠŠè¿™éƒ¨åˆ†åˆ†äº«å‡ºæ¥ã€‚ä¸åŒçš„æ˜¯ï¼Œæ‡’çŒ«å¾®æœä¸­ä½¿ç”¨pg-dockeræ¥æ›¿ä»£dockerå‘½ä»¤ï¼Œä½¿ç”¨dockgeæ¥æ‰§è¡Œdocker-composeã€‚ä»¥ä¸‹è®²è§£ä»¥æ ‡å‡†dockerä¸ºä¸»ï¼Œè¿™æ ·å­æ—¢å­¦ä¼šäº†dockerçŸ¥è¯†ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨æ‡’çŒ«å¾®æœä¸Šå¯åŠ¨DockeræœåŠ¡ã€‚


# ã€Šæ— æ³•éƒ¨ç½²çš„è¯…å’’ã€‹è®²çš„æ˜¯Docker çš„èµ·æºä¸ä½œç”¨ã€é•œåƒä¸å®¹å™¨æ¦‚å¿µã€å®‰è£…å…¥é—¨



### ğŸ™ï¸ å¼€ç¯‡ï¼šä»£ç åœ¨ç”µè„‘ä¸Šè¿è¡Œè‰¯å¥½ï¼Œéƒ¨ç½²å´é¢‘é¢‘ç¿»è½¦

å°ææ˜¯ä¸€ååç«¯å·¥ç¨‹å¸ˆï¼Œåˆšå®Œæˆä¸€ä¸ªç”¨ Flask ç¼–å†™çš„å†…éƒ¨ç®¡ç†ç³»ç»Ÿã€‚ä»–ä¿¡å¿ƒæ»¡æ»¡åœ°å°†ä»£ç æäº¤ï¼Œäº¤ç»™æµ‹è¯•å·¥ç¨‹å¸ˆè€èµµéƒ¨ç½²ã€‚

å¯æ²¡æƒ³åˆ°â€”â€”

> â€œæŠ¥é”™äº†ï¼ä½ æ˜¯ä¸æ˜¯å°‘ä¼ æ–‡ä»¶äº†ï¼Ÿâ€
>
> â€œæˆ‘è¿™è¾¹ Python æ˜¯ 3.6ï¼Œæ€ä¹ˆä½ è¿™ä»£ç ç”¨äº† `match case`ï¼Ÿâ€
>
> â€œä½ æ•°æ®åº“å‘¢ï¼Ÿä½  Redis é…äº†ï¼Ÿç¯å¢ƒå˜é‡åœ¨å“ªï¼Ÿâ€

è¿™ä¸€åˆ»ï¼Œå°æé™·å…¥äº†ä¸€ä¸ªå«ã€Œéƒ¨ç½²åœ°ç‹±ã€çš„ä¸–ç•Œã€‚

è¿™ä¸ªä¸–ç•Œé‡Œï¼Œæ¯ä¸€å°æœåŠ¡å™¨éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„â€œå® ç‰©â€ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€æ‰‹åŠ¨éƒ¨ç½²ã€æ‰‹åŠ¨è¸©å‘ï¼Œç¨æœ‰ä¸æ…å°±ä¼šé™·å…¥ç‰ˆæœ¬å†²çªã€ä¾èµ–ç¼ºå¤±ã€ç¯å¢ƒä¸ä¸€è‡´çš„æ·±æ¸Šã€‚

å°æå¿ƒé‡Œæƒ³ï¼š**æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œèƒ½è®©æˆ‘æŠŠä»£ç å’Œç¯å¢ƒä¸€èµ·æ‰“åŒ…èµ·æ¥ï¼Œæ— è®ºåœ¨å“ªè¿è¡Œéƒ½èƒ½ä¿æŒä¸€è‡´ï¼Ÿ**

---

### ğŸŒ€ å˜æ•…ï¼šç¥ç§˜çš„ç¨‹åºå‘˜å¤§å”ä¸é­”æ³•å®¹å™¨

åœ¨å…¬å¸èŒ¶æ°´é—´ï¼Œå°æé‚‚é€…äº†ä¸€ä¸ªå¸¦ç€é»‘æ¡†çœ¼é•œçš„å¤§å”ï¼Œå¤§å®¶éƒ½å«ä»–è€å‘¨ã€‚

è€å‘¨æ˜¯ä¸ªæŠ€æœ¯è€ç‚®ï¼Œåœ¨å„ç§éƒ¨ç½²å¤§ç¾éš¾ä¸­æ€å‡ºè¡€è·¯ã€‚ä»–å¬å®Œå°æçš„åæ§½åï¼Œè½»è½»åœ°æ¨äº†ä¸€ä»½æ–‡æ¡£è¿‡æ¥ï¼Œåªå†™äº†äº”ä¸ªå­—æ¯ï¼š

> `Docker`

â€œè¿™æ˜¯ä¸ª**é­”æ³•å®¹å™¨**ï¼Œâ€è€å‘¨è¯´ï¼Œâ€œæŠŠä½ ä»£ç å’Œç¯å¢ƒéƒ½æ‰“åŒ…è¿›å»ï¼Œå“ªæ€•æ”¾åœ¨ç«æ˜Ÿï¼Œä¹Ÿèƒ½è·‘ã€‚â€

> â€œä»¥ååˆ«å†â€˜å®ƒåœ¨æˆ‘ç”µè„‘ä¸Šå¯ä»¥è·‘â€™äº†ï¼ŒDocker èƒ½è®©æ‰€æœ‰ç¯å¢ƒå˜å¾—ä¸€è‡´ã€‚â€

å°æçš„çœ¼ç›äº®äº†ã€‚

---

### ğŸ”§ æŠ€æœ¯è®²è§£ Part 1ï¼šä»€ä¹ˆæ˜¯ Dockerï¼Ÿ

Docker æ˜¯ä¸€ä¸ª**å¼€æºçš„å®¹å™¨åŒ–å¹³å°**ï¼Œå®ƒå…è®¸å¼€å‘è€…å°†åº”ç”¨åŠå…¶æ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆä¸€ä¸ªâ€œå®¹å™¨â€ï¼Œä¿è¯åœ¨ä»»ä½•å¹³å°ä¸Šéƒ½å¯ä»¥ä¸€è‡´è¿è¡Œã€‚

ä½ å¯ä»¥æŠŠ Docker æƒ³è±¡æˆï¼š

> **ç¨‹åºå‘˜çš„æ‰“åŒ…ç®±å­**ï¼šæŠŠä½ å†™çš„ç¨‹åºã€ç¯å¢ƒã€åº“ã€é…ç½®éƒ½æ”¾è¿›å»ï¼Œæ‰“åŒ…æˆä¸€ä¸ªâ€œé•œåƒâ€ï¼›
>
> **ç¨‹åºå‘˜çš„å¿«é€’æœåŠ¡**ï¼šè¿è¡Œé•œåƒå°±åƒæ‰“å¼€å¿«é€’ï¼Œå†…å®¹å’Œä½ å¯„å‡ºæ—¶ä¸€æ¨¡ä¸€æ ·ã€‚

#### ğŸš€ ä¸ºä»€ä¹ˆè¦ç”¨ Dockerï¼Ÿ

* âœ… **è·¨å¹³å°è¿è¡Œ**ï¼šä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œï¼ˆRun anywhereï¼‰
* âœ… **å¿«é€Ÿéƒ¨ç½²**ï¼šç§’çº§å¯åŠ¨ï¼Œé€‚åˆ CI/CD
* âœ… **ç¯å¢ƒä¸€è‡´æ€§**ï¼šä¸å†â€œä½ ç”µè„‘èƒ½è·‘æˆ‘ç”µè„‘ä¸è¡Œâ€
* âœ… **è½»é‡éš”ç¦»**ï¼šä¸åƒè™šæ‹Ÿæœºé‚£ä¹ˆé‡ï¼Œä¸éœ€è¦æ•´ä¸ªæ“ä½œç³»ç»Ÿ
* âœ… **èµ„æºå ç”¨å°‘**ï¼šç”¨èµ·æ¥æ›´åƒä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€å°è™šæ‹Ÿæœº

> â˜‘ï¸ ä¸€å¥è¯æ€»ç»“ï¼š**Docker è§£å†³äº†â€œåœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è·‘â€çš„é—®é¢˜ã€‚**

---

### ğŸ› ï¸ æŠ€æœ¯è®²è§£ Part 2ï¼šå¦‚ä½•å®‰è£… Dockerï¼Ÿ

è€å‘¨æ‹äº†æ‹å°æçš„è‚©è†€ï¼Œè¯´ï¼šâ€œå…ˆè£…èµ·æ¥ï¼ŒåŠ¨æ‰‹æœ€é‡è¦ã€‚â€

#### ğŸ§‘â€ğŸ’» åœ¨ Mac / Windows ä¸Šï¼š

* è®¿é—®å®˜ç½‘ï¼š[https://www.docker.com/products/docker-desktop](https://www.docker.com/products/docker-desktop)
* ä¸‹è½½å¹¶å®‰è£… Docker Desktop
* å®‰è£…åæ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œè¾“å…¥ï¼š

```bash
docker --version
```

å¦‚æœçœ‹åˆ° Docker çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚

#### ğŸ§‘â€ğŸ’» åœ¨ Linuxï¼ˆUbuntuï¼‰ä¸Šï¼š

```bash
sudo apt update
sudo apt install docker.io
sudo systemctl start docker
sudo systemctl enable docker
```

ğŸ” *å»ºè®®å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼Œä»¥å…æ¯æ¬¡éƒ½è¦ç”¨ sudoï¼š*

```bash
sudo usermod -aG docker $USER
```

---

### ğŸ§  æŠ€æœ¯è®²è§£ Part 3ï¼šDocker çš„æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ            | è¯´æ˜                                         |
| ------------- | ------------------------------------------ |
| é•œåƒï¼ˆImageï¼‰     | åº”ç”¨å’Œå…¶ä¾èµ–çš„é™æ€å¿«ç…§æ¨¡æ¿ï¼ˆå¦‚ï¼šæ‰“åŒ…å¥½çš„ Python ç¯å¢ƒ + Flask é¡¹ç›®ï¼‰ |
| å®¹å™¨ï¼ˆContainerï¼‰ | é•œåƒè¿è¡Œå‡ºæ¥çš„å®ä¾‹ï¼Œæ˜¯çœŸæ­£â€œæ´»ç€â€çš„ç¨‹åº                       |
| Dockerfile    | ç¼–å†™é•œåƒçš„â€œé…æ–¹â€ï¼Œå®šä¹‰å¦‚ä½•æ„å»ºé•œåƒ                         |
| Docker Hub    | ç±»ä¼¼ GitHub çš„å…¬å…±é•œåƒä»“åº“ï¼Œå¯ä¸Šä¼ /ä¸‹è½½åˆ«äººåšå¥½çš„é•œåƒ            |
| `docker` å‘½ä»¤   | Docker çš„ä¸»å‘½ä»¤å·¥å…·ï¼Œç”¨äºæ“ä½œé•œåƒã€å®¹å™¨ã€ç½‘ç»œã€å·ç­‰              |

#### ğŸ“Œ é•œåƒ vs å®¹å™¨

* é•œåƒæ˜¯â€œæ¨¡å…·â€ï¼Œå®¹å™¨æ˜¯â€œå®ç‰©â€
* é•œåƒä¸å¯å˜ï¼Œå®¹å™¨æ˜¯å¯è¿è¡Œçš„ç¯å¢ƒ
* ä¸€ä¸ªé•œåƒå¯ä»¥è¿è¡Œå¤šä¸ªå®¹å™¨

---

### ğŸ§ª æŠ€æœ¯å®è·µï¼šHello Docker ä¸–ç•Œ

è€å‘¨æŒ‡å¯¼å°ææ•²ä¸‹ç¬¬ä¸€è¡Œå‘½ä»¤ï¼š

```bash
docker run hello-world
```
> å¦‚æœdocker run/pull æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡`lzc-cli appstore copy-image your-images`æ¥ä½¿ç”¨æ‡’çŒ«çš„é•œåƒä»“åº“ã€‚

è¿™ä¸ªå‘½ä»¤ä¼šåšä¸‰ä»¶äº‹ï¼š

1. è‡ªåŠ¨ä» Docker Hub æ‹‰å–ä¸€ä¸ª `hello-world` é•œåƒï¼ˆå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼‰
2. åŸºäºé•œåƒè¿è¡Œå®¹å™¨
3. å®¹å™¨è¿è¡Œåè¾“å‡ºä¿¡æ¯ï¼Œç„¶åè‡ªåŠ¨é€€å‡º

è¿™æ˜¯éªŒè¯ Docker æ˜¯å¦æ­£å¸¸è¿è¡Œçš„â€œç‚¹ç¯æµ‹è¯•â€ã€‚

---

### ğŸ§± å°æçš„ç¬¬ä¸€ä¸ªçœŸå®å®¹å™¨ï¼šFlask Web é¡¹ç›®æ‰“åŒ…å®æˆ˜

è€å‘¨ç¬‘ç€è¯´ï¼šâ€œç°åœ¨ï¼ŒæŠŠä½ é‚£ä¸ª Flask ç®¡ç†ç³»ç»Ÿä¹Ÿä¸¢è¿› Docker è¯•è¯•ã€‚â€

å°æåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å†™äº†ä¸€ä¸ª Dockerfileï¼š

```dockerfile
# ä½¿ç”¨ Python å®˜æ–¹åŸºç¡€é•œåƒ
FROM python:3.11-slim

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY . /app

# å®‰è£…ä¾èµ–
RUN pip install -r requirements.txt

# è®¾ç½®å¯åŠ¨å‘½ä»¤
CMD ["python", "main.py"]
```

#### æ„å»ºé•œåƒï¼š

```bash
docker build -t my-flask-app .
```

#### å¯åŠ¨å®¹å™¨ï¼š

```bash
docker run -p 5000:5000 my-flask-app
```

ç°åœ¨è®¿é—®æµè§ˆå™¨ `http://localhost:5000`ï¼Œä½ çš„é¡¹ç›®ä¸Šçº¿äº†ï¼

---

### ğŸ’¡ å°çŸ¥è¯†å¿«é—ª

* Docker å®¹å™¨å†…éƒ¨ä¸åŒ…å«å®Œæ•´æ“ä½œç³»ç»Ÿï¼ŒåªåŒ…å«å¿…è¦çš„è¿è¡Œåº“ï¼›
* Dockerfile çš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€å±‚ï¼ˆLayerï¼‰ï¼Œæ„å»ºæ—¶ä¼šç¼“å­˜å¤ç”¨ï¼›
* `docker ps` æŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨ï¼Œ`docker images` æŸ¥çœ‹å·²æœ‰é•œåƒï¼›
* å¯ä»¥é€šè¿‡ `.dockerignore` æ–‡ä»¶å¿½ç•¥ä¸æƒ³åŠ å…¥é•œåƒçš„æ–‡ä»¶ï¼Œæ¯”å¦‚ `.git` å’Œæ—¥å¿—ã€‚

---

### âš”ï¸ ç« èŠ‚å°¾å£°ï¼šæ‰“ç ´éƒ¨ç½²è¯…å’’

è¿™æ¬¡ï¼Œå°ææŠŠæ‰“å¥½çš„é•œåƒå‘ç»™äº†æµ‹è¯•è€èµµï¼š

```bash
docker run -p 5000:5000 my-flask-app
```

è€èµµåªè¿è¡Œäº†ä¸€è¡Œå‘½ä»¤ï¼Œé¡¹ç›®ä¾¿ç¥å¥‡åœ°è·‘äº†èµ·æ¥ã€‚

> â€œä¸æ”¹é…ç½®ï¼Ÿä¸ç”¨è£… Pythonï¼Ÿæ•°æ®åº“ä¹Ÿè¿ä¸Šäº†ï¼Ÿâ€
> â€œä½ è¿™æ˜¯ä»€ä¹ˆé­”æ³•ï¼â€

å°æç¬‘äº†ç¬‘ï¼Œç¬¬ä¸€æ¬¡æ„Ÿè§‰éƒ¨ç½²æ˜¯ä»¶ç®€å•çš„äº‹ã€‚

---

## ğŸ§­ ç¬¬ä¸€ç« æ€»ç»“çŸ¥è¯†ç‚¹ï¼š

| æŠ€æœ¯ç‚¹           | å‘½ä»¤                                                |
| ------------- | ------------------------------------------------- |
| å®‰è£… Docker     | Mac/Win ä¸‹è½½ Docker Desktop / Ubuntu å®‰è£… `docker.io` |
| æŸ¥çœ‹ç‰ˆæœ¬          | `docker --version`                                |
| è¿è¡Œæµ‹è¯•å®¹å™¨        | `docker run hello-world`                          |
| ç¼–å†™ Dockerfile | FROM / COPY / RUN / CMD                           |
| æ„å»ºé•œåƒ          | `docker build -t name .`                          |
| è¿è¡Œå®¹å™¨          | `docker run -p å®¿ä¸»:å®¹å™¨ é•œåƒå`                         |

