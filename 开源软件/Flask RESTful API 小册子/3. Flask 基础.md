## **3. Flask åŸºç¡€**

åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹  Flask çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬å¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•çš„ Flask åº”ç”¨ã€å®šä¹‰è·¯ç”±ã€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è°ƒè¯•æ¨¡å¼ã€‚è¿™äº›å†…å®¹æ˜¯æ„å»º RESTful API çš„åŸºç¡€ã€‚

---

### **3.1 Flask åº”ç”¨ç»“æ„**

ä¸€ä¸ªå…¸å‹çš„ Flask åº”ç”¨ç»“æ„å¦‚ä¸‹ï¼š
```
my_flask_app/
â”‚
â”œâ”€â”€ app.py          # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ requirements.txt # ä¾èµ–æ–‡ä»¶
â””â”€â”€ venv/           # è™šæ‹Ÿç¯å¢ƒç›®å½•
```

#### **3.1.1 åˆ›å»º Flask åº”ç”¨**
1. åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `app.py` çš„æ–‡ä»¶ã€‚
2. ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š
   ```python
   from flask import Flask

   # åˆ›å»º Flask åº”ç”¨å®ä¾‹
   app = Flask(__name__)

   # å®šä¹‰è·¯ç”±å’Œè§†å›¾å‡½æ•°
   @app.route('/')
   def hello_world():
       return 'Hello, World!'

   # å¯åŠ¨åº”ç”¨
   if __name__ == '__main__':
       app.run(debug=True)
   ```

3. è¿è¡Œåº”ç”¨ï¼š
   ```bash
   python app.py
   ```

4. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® `http://127.0.0.1:5000/`ï¼Œä½ ä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤º `Hello, World!`ã€‚

---

### **3.2 è·¯ç”±ä¸è§†å›¾å‡½æ•°**

#### **3.2.1 è·¯ç”±**
è·¯ç”±æ˜¯ URL å’Œè§†å›¾å‡½æ•°ä¹‹é—´çš„æ˜ å°„ã€‚Flask ä½¿ç”¨ `@app.route()` è£…é¥°å™¨æ¥å®šä¹‰è·¯ç”±ã€‚

- **åŸºæœ¬è·¯ç”±**ï¼š
  ```python
  @app.route('/')
  def home():
      return 'Welcome to the Home Page!'
  ```

- **å¸¦å‚æ•°çš„è·¯ç”±**ï¼š
  ```python
  @app.route('/user/<username>')
  def show_user_profile(username):
      return f'User: {username}'
  ```

- **æŒ‡å®š HTTP æ–¹æ³•**ï¼š
  ```python
  @app.route('/login', methods=['GET', 'POST'])
  def login():
      if request.method == 'POST':
          return 'Login POST'
      else:
          return 'Login GET'
  ```

#### **3.2.2 è§†å›¾å‡½æ•°**
è§†å›¾å‡½æ•°æ˜¯å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”çš„å‡½æ•°ã€‚æ¯ä¸ªè·¯ç”±å¯¹åº”ä¸€ä¸ªè§†å›¾å‡½æ•°ã€‚

- **è¿”å›å­—ç¬¦ä¸²**ï¼š
  ```python
  @app.route('/')
  def home():
      return 'Hello, World!'
  ```

- **è¿”å› JSON**ï¼š
  ```python
  from flask import jsonify

  @app.route('/data')
  def data():
      return jsonify({'name': 'Alice', 'age': 25})
  ```

---

### **3.3 è¯·æ±‚ä¸å“åº”**

#### **3.3.1 è·å–è¯·æ±‚æ•°æ®**
Flask ä½¿ç”¨ `request` å¯¹è±¡æ¥è·å–å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ•°æ®ã€‚

- **è·å–æŸ¥è¯¢å‚æ•°**ï¼š
  ```python
  from flask import request

  @app.route('/search')
  def search():
      query = request.args.get('q')
      return f'Search query: {query}'
  ```

- **è·å–è¡¨å•æ•°æ®**ï¼š
  ```python
  @app.route('/login', methods=['POST'])
  def login():
      username = request.form.get('username')
      password = request.form.get('password')
      return f'Username: {username}, Password: {password}'
  ```

- **è·å– JSON æ•°æ®**ï¼š
  ```python
  @app.route('/data', methods=['POST'])
  def data():
      data = request.get_json()
      return jsonify(data)
  ```

#### **3.3.2 è¿”å›å“åº”**
Flask è§†å›¾å‡½æ•°å¯ä»¥è¿”å›å¤šç§ç±»å‹çš„å“åº”ï¼š
- **å­—ç¬¦ä¸²**ï¼š
  ```python
  @app.route('/')
  def home():
      return 'Hello, World!'
  ```

- **JSON**ï¼š
  ```python
  @app.route('/data')
  def data():
      return jsonify({'name': 'Alice', 'age': 25})
  ```

- **çŠ¶æ€ç **ï¼š
  ```python
  @app.route('/not_found')
  def not_found():
      return 'Page not found', 404
  ```

- **é‡å®šå‘**ï¼š
  ```python
  from flask import redirect

  @app.route('/redirect')
  def redirect_example():
      return redirect('/')
  ```

---

### **3.4 è°ƒè¯•æ¨¡å¼**

è°ƒè¯•æ¨¡å¼æ˜¯ Flask æä¾›çš„ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ã€‚

#### **3.4.1 å¯ç”¨è°ƒè¯•æ¨¡å¼**
åœ¨è¿è¡Œåº”ç”¨æ—¶ï¼Œè®¾ç½® `debug=True`ï¼š
```python
if __name__ == '__main__':
    app.run(debug=True)
```

#### **3.4.2 è°ƒè¯•æ¨¡å¼çš„åŠŸèƒ½**
1. **è‡ªåŠ¨é‡å¯**ï¼š
   - å½“ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒFlask ä¼šè‡ªåŠ¨é‡å¯åº”ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨åœæ­¢å’Œå¯åŠ¨ã€‚

2. **é”™è¯¯é¡µé¢**ï¼š
   - å¦‚æœåº”ç”¨å‘ç”Ÿé”™è¯¯ï¼ŒFlask ä¼šæ˜¾ç¤ºä¸€ä¸ªè¯¦ç»†çš„é”™è¯¯é¡µé¢ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ªã€‚

3. **è°ƒè¯•å™¨**ï¼š
   - å¦‚æœå¯ç”¨äº†è°ƒè¯•å™¨ï¼ˆ`debug=True`ï¼‰ï¼Œå¯ä»¥åœ¨é”™è¯¯é¡µé¢ä¸­æ‰§è¡Œ Python ä»£ç ï¼Œå¸®åŠ©è°ƒè¯•é—®é¢˜ã€‚

#### **3.4.3 æ³¨æ„äº‹é¡¹**
- **ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨è°ƒè¯•æ¨¡å¼**ï¼š
  - è°ƒè¯•æ¨¡å¼ä¼šæš´éœ²åº”ç”¨çš„å†…éƒ¨ä¿¡æ¯ï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚

---

## **æ€»ç»“**
é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº† Flask çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ï¼š
1. å¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•çš„ Flask åº”ç”¨ã€‚
2. å¦‚ä½•å®šä¹‰è·¯ç”±å’Œè§†å›¾å‡½æ•°ã€‚
3. å¦‚ä½•å¤„ç†è¯·æ±‚å’Œè¿”å›å“åº”ã€‚
4. å¦‚ä½•ä½¿ç”¨è°ƒè¯•æ¨¡å¼å¿«é€Ÿå®šä½é—®é¢˜ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥ **4. æ„å»ºç¬¬ä¸€ä¸ª RESTful API**ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ Flask-RESTful æ„å»ºç¬¦åˆ RESTful é£æ ¼çš„ APIã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…éœ€è¦æ›´è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼ ğŸ˜„